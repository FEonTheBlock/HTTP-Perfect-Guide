## 리다이렉션과 부하 균형

HTTP 애플리케이션은 세 가지를 원한다.

- 신뢰할 수 있는 HTTP 트랜잭션의 수행
- 지연 최소화
- 네트워크 대역폭 절약

이러한 이유 때문에 웹 콘텐츠는 여러 장소에 배포된다. 이렇게 하면 한 곳에 실패한 경우 다른 곳을 이용할 수 있으므로 신뢰성이 개선된다.  
또한 클라이언트가 보다 가까운 리소스에 접근할 수 있게 되어 응답시간도 줄여준다.  
그리고 목적지 서버가 분산되므로 네트워크 혼잡도 줄어든다.

-> 리다이렉션이란 최적의 분산된 콘텐츠를 찾는 것을 도와주는 기법을 의미한다.

대부분의 리다이렉션 장치들은 몇 가지 방식의 부하 균형을 포함한다. 즉, 들어오는 메시지의 부하를 서버들의 집합에게 분산할 수 있다.

### HTTP 리다이렉션

몇몇 웹 사이트는 HTTP 리다이렉트 메시지를 이용해 부하를 분산한다.  
요청을 처리하는 서버(리다이렉팅 서버)는 가용한 것들 중 부하가 가장 적은 콘텐츠 서버를 찾아서 브라우저의 요청을 그 서버로 리다이렉트 한다.

**장점**  
리다이렉트를 하는 서버가 클라이언트의 아이피 주소를 알기 때문에 좀 더 정보에 근거해 선택할 수 있다.

**단점**

- 어떤 서버로 리다이렉트할 지 결정하려면 원 서버는 상당히 많은 처리를 해야 한다.
- 페이지에 접근할 때마다 두 번의 왕복이 필요하기 때문에, 대기 시간이 길어진다.
- 리다이렉트 서버가 고장나면, 사이트도 고장난다.

### DNS 리다이렉션

DNS는 하나의 도메인에 여러 아이피 주소가 결부되는 것을 허용하며, DNS 분석자는 여러 아이피 주소를 반환하도록 설정되거나 프로그래밍 될 수 있다.

분석자가 어떤 아이피 주소를 반환할 것인가를 결정하는 방법은 단순한 것부터 복잡한 것까지 다양하다. 가장 쉬운 DNS 결정 알고리즘은 단순한 라운드 로빈이다.

**라운드 로빈**  
서버에 대한 클라이언트의 상대적인 위치나 서버의 현재 스트레스를 고려하지 않는다.  
부하 균형을 위해, DNS 서버는 룩업이 끝났을 때마다 주소를 순환시킨다.  
쉽게 말해서, 부하를 순환시켜 돌아가면서 서버를 배정하는 것이다.  
-> 완벽하지는 않은 방법

몇몇 향상된 DNS 서버는 주소의 순서를 결정하기 위해 다른 기법을 사용한다.

**부하 균형 알고리즘**  
웹 서버의 로드를 추적하고 가장 로드가 적은 웹 서버를 목록의 가장 위에 놓는다.

**근접 라우팅 알고리즘**  
근처의 웹 서버로 보내는 시도를 한다.

**결함 마스킹 알고리즘**  
DNS 서버는 네트워크의 상태를 모니터링하여 장애를 피해서 라우팅한다.
